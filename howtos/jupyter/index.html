<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  
  <link rel="shortcut icon" href="../../img/favicon.ico">
  <title>Jupyter - OARC-Rutgers</title>
  <link href='https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700' rel='stylesheet' type='text/css'>
  <link href='https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css' rel='stylesheet' type='text/css'>

  <link rel="stylesheet" href="../../css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../css/theme_extra.css" type="text/css" />
  <link rel="stylesheet" href="../../css/highlight.css">
  
  <script>
    // Current page data
    var mkdocs_page_name = "Jupyter";
    var mkdocs_page_input_path = "howtos/jupyter.md";
    var mkdocs_page_url = "/howtos/jupyter/";
  </script>
  
  <script src="../../js/jquery-2.1.1.min.js"></script>
  <script src="../../js/modernizr-2.8.3.min.js"></script>
  <script type="text/javascript" src="../../js/highlight.pack.js"></script> 
  
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
      <div class="wy-side-nav-search">
        <a href="../.." class="icon icon-home"> OARC-Rutgers</a>
        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
      


  
    


<ul class="" href="../..">
  
    
    
      <li class=" toctree-l1">
        <a class="" href="../..">Home</a>
      </li>
</ul>

<!--
 | This is a hacky way to pass setting from the template generator to the
 | javascript that drives the dropdown functionality
-->
<div style="width: 1px; height: 1px; visibility: none;">

</div>



  
    


<ul class="" href="../../guides/Cluster_User_Guide/">
  
    
    
      <li class=" toctree-l1">
        <a class="" href="../../guides/Cluster_User_Guide/">Cluster Guides</a>
      </li>
</ul>

<!--
 | This is a hacky way to pass setting from the template generator to the
 | javascript that drives the dropdown functionality
-->
<div style="width: 1px; height: 1px; visibility: none;">

</div>



  
    


<ul class="" href="../../guides/Cluster_Examples/">
  
    
    
      <li class=" toctree-l1">
        <a class="" href="../../guides/Cluster_Examples/">Examples</a>
      </li>
</ul>

<!--
 | This is a hacky way to pass setting from the template generator to the
 | javascript that drives the dropdown functionality
-->
<div style="width: 1px; height: 1px; visibility: none;">

</div>



  
    


<ul class="" href="../../guides/community_resources/">
  
    
    
      <li class=" toctree-l1">
        <a class="" href="../../guides/community_resources/">Community</a>
      </li>
</ul>

<!--
 | This is a hacky way to pass setting from the template generator to the
 | javascript that drives the dropdown functionality
-->
<div style="width: 1px; height: 1px; visibility: none;">

</div>



  
    
    
    
    
    
    

  <p class="caption">HowTo</p>


<ul class="current" href="howtos/jupyter">
  
    
      
<li class="current toctree-l1">
  <a href="./" title="Jupyter"
      class="current">
    Jupyter
  </a>

  
  
    
    
      
  
  
  
  <ul class="current subnav">
    
      

  
  
  


  <li class="toctree-l2 toc-item">
    <a href="#tunneling" title="Jupyter">Tunneling</a>
  </li>

    
      

  
  


  <li class="toctree-l2 toc-item">
    <a href="#how-to-launch-jupyter-notebook-on-the-cluster" title="Jupyter">How to launch Jupyter notebook on the cluster</a>
  </li>

    
  </ul>

    
  
</li>
    
      
<li class=" toctree-l1">
  <a href="../fastx/" title="FastX"
      class="">
    FastX
  </a>

  
  
</li>
    
</ul>

<!--
 | This is a hacky way to pass setting from the template generator to the
 | javascript that drives the dropdown functionality
-->
<div style="width: 1px; height: 1px; visibility: none;">

</div>



  
    


<ul class="" href="../../ressentials/">
  
    
    
      <li class=" toctree-l1">
        <a class="" href="../../ressentials/">R tutorial</a>
      </li>
</ul>

<!--
 | This is a hacky way to pass setting from the template generator to the
 | javascript that drives the dropdown functionality
-->
<div style="width: 1px; height: 1px; visibility: none;">

</div>



  
    


<ul class="" href="../../CheatSheet/">
  
    
    
      <li class=" toctree-l1">
        <a class="" href="../../CheatSheet/">Cheat Sheets</a>
      </li>
</ul>

<!--
 | This is a hacky way to pass setting from the template generator to the
 | javascript that drives the dropdown functionality
-->
<div style="width: 1px; height: 1px; visibility: none;">

</div>



  
    


<ul class="" href="../../resources/">
  
    
    
      <li class=" toctree-l1">
        <a class="" href="../../resources/">Resources</a>
      </li>
</ul>

<!--
 | This is a hacky way to pass setting from the template generator to the
 | javascript that drives the dropdown functionality
-->
<div style="width: 1px; height: 1px; visibility: none;">

</div>



  
    


<ul class="" href="../../faq/">
  
    
    
      <li class=" toctree-l1">
        <a class="" href="../../faq/">FAQ</a>
      </li>
</ul>

<!--
 | This is a hacky way to pass setting from the template generator to the
 | javascript that drives the dropdown functionality
-->
<div style="width: 1px; height: 1px; visibility: none;">

</div>


      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../..">OARC-Rutgers</a>
      </nav>

      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../..">Docs</a> &raquo;</li>
    
      
        
          <li>HowTo &raquo;</li>
        
      
    
    <li>Jupyter</li>
    <li class="wy-breadcrumbs-aside">
      
        <a href="https://github.com/rutgers-oarc/training/edit/master/docs/howtos/jupyter.md"
          class="icon icon-github"> Edit on GitHub</a>
      
    </li>
  </ul>
  <hr/>
</div>
          <div role="main">
            <div class="section">
              
                <h1 id="tunneling">Tunneling</h1>
<p>This is a technique for connecting from your local machine to a remote web server, such as Jupyter notebook running on the compute node of a cluster. </p>
<ol>
<li>run jupyter notebook as a slurm job </li>
<li>find out on which compute node jupyter notebook ended up</li>
<li>in another terminal establish "port forwarding" - from local port 9999 to port 8889 on the specific node (slepner009 here)</li>
</ol>
<pre><code># This procedure works not only with jupyter notebook, but any web app running on a compute node

#command to run jupyter notebook 
srun -p main -c 1 -t 10:00 --error=slurm.%N_%j.err --output=slurm.%N_%j.out jupyter notebook --no-browser --ip=0.0.0.0 --port=8889

# to start jupyter succintly 
sbatch start_jupyter.sh      #start jupyter job on port 8889
squeue -u kp807              #find out on which node is the job running - say it's slepner009

# in another terminal establish &quot;port forwarding&quot; - from local port 9999 to port 8889 on the specific node (slepner009 here)
ssh -L 9999:slepner009:8889 kp807@amarel.hpc.rutgers.edu   # modify slepner009, the ports, the netID
</code></pre>

<p>Video expaining the steps above: 
<a href="http://www.youtube.com/watch?v=Nb2ERdr5KD0"><img alt="Port Tunneling" src="http://img.youtube.com/vi/Nb2ERdr5KD0/0.jpg" /></a></p>
<h1 id="how-to-launch-jupyter-notebook-on-the-cluster">How to launch Jupyter notebook on the cluster</h1>
<p>There is an already available installation of Anaconda 5.1.0 with Python 3.6.4 on the cluster, which contains both Jupyter notebook and Jupyter lab. To load the necessary module execute these commands: </p>
<pre><code>module use /projects/community/modulefiles
module load py-data-science-stack
</code></pre>

<p>Copy this into a script file like <code>start_jupyter.sh</code></p>
<pre><code>#!/bin/bash

#SBATCH --partition=main             # Partition (job queue)
#SBATCH --job-name=jupyter          # Assign an short name to your job
#SBATCH --nodes=1                    # Number of nodes you require
#SBATCH --ntasks=1                   # Total # of tasks across all nodes
#SBATCH --cpus-per-task=1            # Cores per task (&gt;1 if multithread tasks)
#SBATCH --mem=4000                 # Real memory (RAM) required (MB)
#SBATCH --time=01:00:00              # Total run time limit (HH:MM:SS)
#SBATCH --output=slurm.%N.%j.out     # STDOUT output file
#SBATCH --error=slurm.%N.%j.err      # STDERR output file (optional) 

export XDG_RUNTIME_DIR=$HOME/tmp   ## needed for jupyter writting temporary files

module use /projects/community/modulefiles 
module load py-data-science-stack         # loads anaconda
source activate pytorch-0.4.0

#run system-installed jupyter notebook on port 8889. ip 0.0.0.0 means &quot;any ip as interface&quot;
srun jupyter notebook --no-browser --ip=0.0.0.0 --port=8889
</code></pre>

<p>Then run <code>sbatch start_jupyter.sh</code> on amarel login node. Now you need to find which node the jupyter notebook is running at. Do <code>squeue -u &lt;your net id&gt;</code> to see the slurm jobs you are running. 
You should then do the port tunneling described in the previous section and open local browser at that port. </p>
<p>Youtube video that explains this: 
<a href="https://www.youtube.com/watch?v=8UQHLO85rlQ"><img alt="Graphical programs via FastX" src="http://img.youtube.com/vi/8UQHLO85rlQ/0.jpg" /></a></p>
              
            </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../fastx/" class="btn btn-neutral float-right" title="FastX">Next <span class="icon icon-circle-arrow-right"></span></a>
      
      
        <a href="../../guides/community_resources/" class="btn btn-neutral" title="Community"><span class="icon icon-circle-arrow-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
  </div>

  Built with <a href="http://www.mkdocs.org">MkDocs</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
      
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" style="cursor: pointer">
    <span class="rst-current-version" data-toggle="rst-current-version">
      
          <a href="https://github.com/rutgers-oarc/training/" class="fa fa-github" style="float: left; color: #fcfcfc"> GitHub</a>
      
      
        <span><a href="../../guides/community_resources/" style="color: #fcfcfc;">&laquo; Previous</a></span>
      
      
        <span style="margin-left: 15px"><a href="../fastx/" style="color: #fcfcfc">Next &raquo;</a></span>
      
    </span>
</div>
    <script>var base_url = '../..';</script>
    <script src="../../js/theme.js"></script>
      <script src="../../search/require.js"></script>
      <script src="../../search/search.js"></script>

</body>
</html>
